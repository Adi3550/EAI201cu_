<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>FIFA 2026 Finalist Predictor</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        h1 { color: #4CAF50; }
        #teams { width: 300px; height: 100px; }
        button { margin-top: 10px; padding: 10px; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>FIFA 2026 Finalist Predictor</h1>
    <div>
        <h3>Select Teams:</h3>
        <select id="teams" multiple></select>
    </div>
    <button onclick="predict()">Predict Finalists</button>
    <button onclick="refreshData()">Refresh Data</button>
    <div id="output"></div>

    <script>
        async function loadTeams() {
            const res = await fetch('/teams');
            const data = await res.json();
            const select = document.getElementById('teams');
            data.teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.text = team;
                select.appendChild(option);
            });
        }

        async function predict() {
            const select = document.getElementById('teams');
            const selectedTeams = Array.from(select.selectedOptions).map(o => o.value);
            const response = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({teams: selectedTeams})
            });
            const data = await response.json();
            const output = document.getElementById('output');
            if (data.finalists.length === 0) {
                output.innerHTML = '<p>No finalists predicted.</p>';
                return;
            }
            let html = '<h3>Top Predicted Finalists:</h3><ul>';
            data.finalists.forEach(f => {
                html += `<li>${f.team} - Probability: ${f.probability}</li>`;
            });
            html += '</ul>';
            output.innerHTML = html;
        }

        async function refreshData() {
            const response = await fetch('/refresh-data', {method: 'POST'});
            const data = await response.json();
            alert(data.message);
        }

        window.onload = () => {
            loadTeams();
        };
    </script>
</body>
</html>
